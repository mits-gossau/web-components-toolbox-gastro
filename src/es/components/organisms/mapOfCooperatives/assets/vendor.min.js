var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step("next",value);},function(err){step("throw",err);});}}return step("next");});};}ui.globalSetup=ui.getElementSetup({el:$("html")[0]}),ui.globalSetup.theme="mgb",ui.globalSetup.colCount=["2","3","3","4","4"],ui.globalSetup.tilesVisibleCount=["1.5","2.5","3","4","4"],ui.globalSetup.paginationOptions={disabled:!0},ui.getSetup=function(e){var i=void 0;try{i=JSON.parse(e.replace(/'/g,'"'));}catch(i){console.error("ERROR >> getElementSetup","dataSetup",e),console.error("ERROR >> getElementSetup","error :",i);}return i;},ui.getUserObj=function(i){console.log("getUserObj","data",i);var e="oidc.user:"+("test"===ui.globalSetup.env?"https://test-login.migros.ch":"https://login.migros.ch")+":"+ui.globalSetup.oidcClientId;return{identifier:i.sub,name:i.nickname,token:ui.getSetup(sessionStorage[e]).access_token};},ui.setUserObj=function(i,e,t){return{identifier:i,name:e,token:t};},ui.getLanguage=function(i){return i.language=i.language||ui.globalSetup.lang,i;},ui.getBasicOptions=function(i){return i.environment=i.environment||ui.globalSetup.env,i.env=i.environment||ui.globalSetup.env,i.webAPIKey=i.webAPIKey||ui.globalSetup.sessionKey,i.theme=i.theme||ui.globalSetup.theme,i.trackingInfo=i.trackingInfo||"products",ui.getLanguage(i),i;},ui.uuid=function(i){return i+"_"+Math.random().toString(36).substr(2,9);},ui.bootstrapVendorUnveilImagesWidget=function(i){$.fn.unveil&&(i?$(".mui-js-unveil-image",i):$(".mui-js-unveil-image:not(.js-no-initial-bootstrap .mui-js-unveil-image)")).unveil();},ui.bootstrapVendorProductsConfigurationWidgets=function(i){function eachWidget(i,r,u,l){0!==i.length&&("true"===localStorage.getItem("logMsrcWidgets")&&console.log("FOUND MSRC",r,i.length),i.each(function(i,o){var s=$(o),e=ui.getElementSetup({el:o});e&&e.widgetConfig&&(e.widgetConfig instanceof Array?e.widgetConfig:[e.widgetConfig]).forEach(function(i,e){var t=i,i=s.parents(".js-tabs-overflow-control"),n=s.parents(".js-tabs-fit-control");t.hideAddToShoppingList=!0,t.mobilSlider&&document.body.clientWidth<992&&(r=u?"OfferSlider":"ProductSlider",t.filterOptions&&t.filterOptions.additionalQueryParams&&t.filterOptions.additionalQueryParams.limit&&(t.limit=t.filterOptions.additionalQueryParams.limit),l=ui.initProductSliderOrOfferSlider),i.length?(!1==!!i[0].hidden&&0<s.parents(".panel-collapse.collapse.in").length&&l(o,t,u,r),i.on("shown.bs.collapse",function(i){0<s.parents(".panel-collapse.collapse.in").length&&l(o,t,u,r);})):n.length?(!1==!!n[0].hidden&&0<s.parents(".tab-pane.active").length&&l(o,t,u,r),n.on("shown.bs.tab",function(i){0<s.parents(".tab-pane.active").length&&l(o,t,u,r);})):l(o,t,u,r);});}));}window.msrc&&window.msrc.components&&window.msrc.components.articles&&(window.msrc.components.articles.product&&eachWidget($(".ui-js-product",i),"Product",!1,ui.initProductOrOffer),window.msrc.components.articles.offer&&eachWidget($(".ui-js-offer",i),"Offer",!0,ui.initProductOrOffer),window.msrc.components.articles.productList&&eachWidget($(".ui-js-product-list",i),"ProductList",!1,ui.initProductListOrOfferList),window.msrc.components.articles.offerlist&&eachWidget($(".ui-js-offer-list",i),"OfferList",!0,ui.initProductListOrOfferList),window.msrc.components.articles.productSlider&&eachWidget($(".ui-js-product-slider",i),"ProductSlider",!1,ui.initProductSliderOrOfferSlider),window.msrc.components.articles.offerSlider&&eachWidget($(".ui-js-offer-slider",i),"OfferSlider",!0,ui.initProductSliderOrOfferSlider));},ui.initMsrcWidget=function(i,e,t,n){var o;0<i.id.length||(o=ui.uuid(e),"true"===localStorage.getItem("logMsrcWidgets")&&(console.log("INIT",e,"ID",o,"OPTIONS",t),console.log("JSON stringify : ",JSON.stringify(t))),n("#"+(i.id=o),t));},ui.initProductOrOffer=function(e,i,t,n){var o,s;void 0===(i=ui.getBasicOptions(i)).index&&(s=$(e).parents(".row")).length&&(s=$(s[0]).hasClass("ui-js-data-layer-item")&&1<s.length?$(s[1]):s.first(),void 0!==(s=$(s).children('[class*="col-"]'))&&0<(o=s.filter(function(i){return 1===$(this).find($(e)).length;})).length?i.index=s.index(o):i.index=0),i.layout&&"mobil-mini"===i.layout&&(document.body.clientWidth<480?i.layout="mini":i.layout="default"),t?ui.initMsrcWidget(e,n,i,window.msrc.components.articles.offer):ui.initMsrcWidget(e,n,i,window.msrc.components.articles.product);},ui.initProductListOrOfferList=function(i,e,t,n){(e=ui.getBasicOptions(e)).paginationOptions=e.paginationOptions||ui.globalSetup.paginationOptions,e.colCount=e.colCount||ui.globalSetup.colCount,e.limit&&(e.articlesPerPage=e.limit),t?ui.initMsrcWidget(i,n,e,window.msrc.components.articles.offerlist):ui.initMsrcWidget(i,n,e,window.msrc.components.articles.productList);},ui.initProductSliderOrOfferSlider=function(i,e,t,n){(e=ui.getBasicOptions(e)).tilesVisibleCount=e.tilesVisibleCount||ui.globalSetup.tilesVisibleCount,t?ui.initMsrcWidget(i,n,e,window.msrc.components.articles.offerSlider):ui.initMsrcWidget(i,n,e,window.msrc.components.articles.productSlider);},function(){var o=!0,e=!1;var n="true"===localStorage.getItem("logLogin");var t;ui.bootstrapVendorLoginWidget=function(i){var _this=this;e||(e=!0,_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:n&&console.log("setup and autologin: ",JSON.stringify(JSON.parse(document.documentElement.dataset.setup)));_context.next=3;return window.msrc.utilities.login.setup(JSON.parse(document.documentElement.dataset.setup));case 3:case"end":return _context.stop();}}},_callee,_this);}))());var t=function t(i,e){i.id=ui.uuid("Login"),e=ui.getLanguage(e),window.msrc.components.login.button("#"+i.id,e);};o&&window.msrc&&window.msrc.components&&window.msrc.components.login&&(window.msrc.components.login.button&&$(".ui-js-login",i).each(function(i,e){e.dataset.setup?t(e,JSON.parse(e.dataset.setup)):t(e,{});}),window.msrc.components.login.profileFlyout&&$(".ui-js-profile",i).each(function(i,e){var t=e.dataset.setup?JSON.parse(e.dataset.setup):{},t=ui.getLanguage(t);window.msrc.components.login.profileFlyout(e,t);}));},ui.bootstrapVendorSearchWidget=function(i){var e;window.msrc&&window.msrc.components&&window.msrc.components.search&&window.msrc.components.search.box&&(i=$(".mui-js-search",i),e=ui.getElementSetup({el:i[0]}),i.length&&e&&e.config&&(e.config&&void 0===e.config.opensOnSubmitInSameWindow&&(e.config.opensOnSubmitInSameWindow=!0),i={env:e.env,client:e.client||ui.globalSetup.theme,language:e.language||ui.globalSetup.lang,config:e.config},window.msrc.components.search.box(".mui-js-search",i)));},ui.bootstrapVendorSearchResultComponent=function(i){var e;window.msrc&&window.msrc.components&&window.msrc.components.search&&window.msrc.components.search.results&&(i=$(".mui-js-search-results",i),e=ui.getElementSetup({el:i[0]}),i.length&&e&&(i=_extends({},e,{client:e.client||ui.globalSetup.theme,language:e.language||ui.globalSetup.lang}),window.msrc.components.search.results(".mui-js-search-results",i)));},ui.boostrapVendorNewsletterSignUp=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){var i,_n,e,t;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(o&&window.msrc&&window.msrc.utilities&&window.msrc.utilities.login&&window.msrc.utilities.login.login&&window.msrc.components&&window.msrc.components.newsletter&&window.msrc.components.newsletter.newsletterSignUp)){_context2.next=8;break;}_context2.next=3;return window.msrc.utilities.login.getUser();case 3:i=_context2.sent;i=i&&i.access_token?i.access_token:"";_n=$(".mui-js-newsletter-signup");e=_n.data("signup-action-text")||"Jetzt abonnieren",t=_n.data("subscribe-action-text")||"Migros-Newsletter Abonnieren";window.msrc.components.newsletter.newsletterSignUp(".mui-js-newsletter-signup",{authToken:i,webAPIKey:ui.globalSetup.sessionKey,env:ui.globalSetup.env,language:ui.globalSetup.lang,theme:"mgb",newsletterId:"BOM",platformId:"migros-ch",login:window.msrc.utilities.login.login,translations:{signUpAction:e,subscribeAction:t}});case 8:case"end":return _context2.stop();}}},_callee2,this);})),ui.boostrapVendorTryvertising=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(){var i,_t,e;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(o&&window.msrc&&window.msrc.utilities&&window.msrc.utilities.login&&window.msrc.utilities.login.login&&window.msrc.components&&window.msrc.components.community&&window.msrc.components.community.tryvertising)){_context3.next=8;break;}_context3.next=3;return window.msrc.utilities.login.getUser();case 3:i=_context3.sent;i=i&&i.access_token?i.access_token:"";_t=$(".mui-js-tryvertising");e=_t.data("tryvertising-slug");e&&window.msrc.components.community.tryvertising(".mui-js-tryvertising",{env:ui.globalSetup.env,theme:"mgb",language:ui.globalSetup.lang,tryvertisingSlug:e,login:window.msrc.utilities.login.login,userToken:i,webAPIKey:ui.globalSetup.sessionKey});case 8:case"end":return _context3.stop();}}},_callee3,this);})),$(function(){var i;o=0===$(".prevent-vendor-init").length,i=$(".ui-scope .ui-js-header-panel"),t=i=0===i.length?null:i,ui.bootstrapVendorLoginWidget.reinitializable=!1,ui.bootstrapVendorLoginWidget(t),ui.bootstrapVendorSearchWidget(t),ui.bootstrapVendorSearchResultComponent(t),ui.boostrapVendorNewsletterSignUp(t),ui.boostrapVendorTryvertising(t);}),$(window).on("load",function(){ui.bootstrapVendorUnveilImagesWidget(t),ui.bootstrapVendorProductsConfigurationWidgets(t);}),ui.reinitbootstrapVendorWidgets=function(i){ui.bootstrapVendorProductsConfigurationWidgets(i);};}.call(this);//# sourceMappingURL=vendor.min.js.map
//# sourceMappingURL=vendor.min.js.map
