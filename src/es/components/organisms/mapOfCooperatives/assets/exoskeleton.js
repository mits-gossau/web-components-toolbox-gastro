/*!
 * Exoskeleton.js 0.7.0
 * (c) 2013 Paul Miller <http://paulmillr.com>
 * Based on Backbone.js
 * (c) 2010-2013 Jeremy Ashkenas, DocumentCloud
 * Exoskeleton may be freely distributed under the MIT license.
 * For all details and documentation: <http://exosjs.com>
 */
!function(n,r){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,i){n.Backbone=n.Exoskeleton=r(n,i,t,e)});else if("undefined"!=typeof exports){var t,e;try{t=require("underscore")}catch(t){}try{e=require("jquery")}catch(t){}r(n,exports,t,e)}else n.Backbone=n.Exoskeleton=r(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(this,function(e,Backbone,x,i){"use strict";function t(){throw new Error('A "url" property or function must be specified')}function u(e,i){var n=i.error;i.error=function(t){n&&n(e,t,i),e.trigger("error",e,t,i)}}function v(t){return"function"==typeof x[t]}function y(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;var r=l.call(t);if(r!=l.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!==+t?e!==+e:0===t?1/t==1/e:t===+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=i.length;s--;)if(i[s]==t)return n[s]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!("function"==typeof o&&o instanceof o&&"function"==typeof a&&a instanceof a))return!1;i.push(t),n.push(e);var h=0,u=!0;if("[object Array]"===r){if(u=(h=t.length)===e.length)for(;h--&&(u=y(t[h],e[h],i,n)););}else{for(var c in t)if(x.has(t,c)&&(h++,!(u=x.has(e,c)&&y(t[c],e[c],i,n))))break;if(u){for(c in e)if(x.has(e,c)&&!h--)break;u=!h}}return i.pop(),n.pop(),u}var n=e.Backbone,r=e.Exoskeleton,s=Backbone.utils=x=x||{},i=(Backbone.$=i,[]),o=i.slice,l={}.toString,a=(Backbone.noConflict=function(){return e.Backbone=n,e.Exoskeleton=r,this},Backbone.extend=function(t,e){function ca(){this.constructor=n}var i=this,n=t&&x.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)};x.extend(n,i,e);return ca.prototype=i.prototype,n.prototype=new ca,t&&x.extend(n.prototype,t),n.__super__=i.prototype,n},s.result=function(t,e){var i=t?t[e]:void 0;return"function"==typeof i?t[e]():i},s.defaults=function(i){return o.call(arguments,1).forEach(function(t){for(var e in t)void 0===i[e]&&(i[e]=t[e])}),i},s.extend=function(i){return o.call(arguments,1).forEach(function(t){for(var e in t)i[e]=t[e]}),i},{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),h=(s.escape=function(t){return null==t?"":String(t).replace(/[&<>"']/g,function(t){return a[t]})},s.sortBy=function(t,e,n){var r="function"==typeof e?e:function(t){return t[e]};return t.map(function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(n<i||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}).map(function(t){return t.value})},0),c=(s.uniqueId=function(t){var e=++h+"";return t?t+e:e},s.has=function(t,e){return Object.hasOwnProperty.call(t,e)},s.isEqual=function(t,e){return y(t,e,[],[])},Backbone.Events={on:function(t,e,i){return d(this,"on",t,[e,i])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this})),this},once:function(t,e,i){if(!d(this,"once",t,[e,i])||!e)return this;var n,r=this,s=function(){n||(n=!0,r.off(t,s),e.apply(this,arguments))};return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var n,r,s,o,a,h,u,c;if(!this._events||!d(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(a=0,h=(o=t?[t]:Object.keys(this._events)).length;a<h;a++)if(t=o[a],s=this._events[t]){if(this._events[t]=n=[],e||i)for(u=0,c=s.length;u<c;u++)r=s[u],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&n.push(r);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!d(this,"trigger",t,e))return this;var t=this._events[t],i=this._events.all;return t&&p(t,e),i&&p(i,arguments),this},stopListening:function(t,e,i){var n=this._listeningTo;if(!n)return this;var r,s=!e&&!i;for(r in i||"object"!=typeof e||(i=this),t&&((n={})[t._listenId]=t),n)(t=n[r]).off(e,i,this),!s&&Object.keys(t._events).length||delete this._listeningTo[r];return this}}),f=/\s+/,d=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)t[e].apply(t,[r,i[r]].concat(n));return!1}if(f.test(i)){for(var s=i.split(f),o=0,a=s.length;o<a;o++)t[e].apply(t,[s[o]].concat(n));return!1}return!0},p=function(t,e){var i,n=-1,r=t.length,s=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<r;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=t[n]).callback.call(i.ctx,s,o,a);return;default:for(;++n<r;)(i=t[n]).callback.apply(i.ctx,e);return}},g={listenTo:"on",listenToOnce:"once"},E=(Object.keys(g).forEach(function(t){var n=g[t];c[t]=function(t,e,i){return((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=x.uniqueId("l"))]=t)[n](e,i=i||"object"!=typeof e?i:this,this),this}}),c.bind=c.on,c.unbind=c.off,x.extend(Backbone,c),Backbone.Model=function(t,e){t=t||{};e=e||{},this.cid=x.uniqueId("c"),this.attributes=Object.create(null),e.collection&&(this.collection=e.collection),e.parse&&(t=this.parse(t,e)||{}),t=x.defaults({},t,x.result(this,"defaults")),this.set(t,e),this.changed=Object.create(null),this.initialize.apply(this,arguments)}),m=(x.extend(E.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return x.extend({},this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return x.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,r,s,o,a,h,u;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,!this._validate(r,i=i||{}))return!1;for(n in s=i.unset,t=i.silent,o=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=x.extend(Object.create(null),this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]),r)e=r[n],x.isEqual(u[n],e)||o.push(n),x.isEqual(h[n],e)?delete this.changed[n]:this.changed[n]=e,s?delete u[n]:u[n]=e;if(!t){o.length&&(this._pending=i);for(var c=0,l=o.length;c<l;c++)this.trigger("change:"+o[c],this,u[o[c]],i)}if(a)return this;if(!t)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,x.extend({},e,{unset:!0}))},clear:function(t){var e,i={};for(e in this.attributes)i[e]=void 0;return this.set(i,x.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!!Object.keys(this.changed).length:x.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&x.extend(Object.create(null),this.changed);var e,i,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(i in t)x.isEqual(r[i],e=t[i])||((n=n||{})[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return x.extend(Object.create(null),this._previousAttributes)},fetch:function(e){void 0===(e=e?x.extend({},e):{}).parse&&(e.parse=!0);var i=this,n=e.success;return e.success=function(t){if(!i.set(i.parse(t,e),e))return!1;n&&n(i,t,e),i.trigger("sync",i,t,e)},u(this,e),this.sync("read",this,e)},save:function(t,e,i){var n,r=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,i=x.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=x.extend(Object.create(null),r,n)),void 0===i.parse&&(i.parse=!0);var s=this,o=i.success;return i.success=function(t){s.attributes=r;var e=s.parse(t,i);if((e=i.wait?x.extend(n||{},e):e)&&"object"==typeof e&&!s.set(e,i))return!1;o&&o(s,t,i),s.trigger("sync",s,t,i)},u(this,i),"patch"==(t=this.isNew()?"create":i.patch?"patch":"update")&&(i.attrs=n),e=this.sync(t,this,i),n&&i.wait&&(this.attributes=r),e},destroy:function(e){e=e?x.extend({},e):{};function Tb(){i.trigger("destroy",i,i.collection,e)}var i=this,n=e.success;if(e.success=function(t){(e.wait||i.isNew())&&Tb(),n&&n(i,t,e),i.isNew()||i.trigger("sync",i,t,e)},this.isNew())return e.success(),!1;u(this,e);var t=this.sync("delete",this,e);return e.wait||Tb(),t},url:function(){var e=x.result(this,"urlRoot")||x.result(this.collection,"url")||t();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},x.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=x.extend(Object.create(null),this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger("invalid",this,t,x.extend(e,{validationError:t})),!1)}}),x.keys&&["keys","values","pairs","invert","pick","omit"].filter(v).forEach(function(e){E.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),x[e].apply(x,t)}}),Backbone.Collection=function(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,x.extend({silent:!0},e))}),w={add:!0,remove:!0,merge:!0},b={add:!0,remove:!1},i=(x.extend(m.prototype,c,{model:void 0===E?null:E,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:!1},e,b))},remove:function(t,e){var i,n,r,s,o=!Array.isArray(t);for(e=e||{},i=0,n=(t=o?[t]:t.slice()).length;i<n;i++)(s=t[i]=this.get(t[i]))&&(delete this._byId[s.id],delete this._byId[s.cid],r=this.indexOf(s),this.models.splice(r,1),this.length--,e.silent||(e.index=r,s.trigger("remove",s,this,e)),this._removeReference(s,e));return o?t[0]:t},set:function(t,e){(e=x.defaults({},e,w)).parse&&(t=this.parse(t,e));var i,n,r,s,o=!Array.isArray(t),a=(t=o?t?[t]:[]:t.slice(),e.at),h=this.model,u=this.comparator&&null==a&&!1!==e.sort,c="string"==typeof this.comparator?this.comparator:null,l=[],f=[],d={},p=e.add,g=e.merge,v=e.remove,y=!(u||!p||!v)&&[];for(b=0,_=t.length;b<_;b++){if(r=(n=t[b]||{})instanceof E?i=n:n[h.prototype.idAttribute||"id"],r=this.get(r))v&&(d[r.cid]=!0),g&&(n=n===i?i.attributes:n,e.parse&&(n=r.parse(n,e)),r.set(n,e),u&&!s&&r.hasChanged(c)&&(s=!0)),t[b]=r;else if(p){if(!(i=t[b]=this._prepareModel(n,e)))continue;l.push(i),this._addReference(i,e)}i=r||i,!y||!i.isNew()&&d[i.id]||y.push(i),d[i.id]=!0}if(v){for(b=0,_=this.length;b<_;++b)d[(i=this.models[b]).cid]||f.push(i);f.length&&this.remove(f,e)}if(l.length||y&&y.length)if(u&&(s=!0),this.length+=l.length,null!=a)for(b=0,_=l.length;b<_;b++)this.models.splice(a+b,0,l[b]);else{y&&(this.models.length=0);for(var m=y||l,b=0,_=m.length;b<_;b++)this.models.push(m[b])}if(s&&this.sort({silent:!0}),!e.silent){for(b=0,_=l.length;b<_;b++)(i=l[b]).trigger("add",i,this,e);(s||y&&y.length)&&this.trigger("sort",this,e)}return o?t[0]:t},reset:function(t,e){e=e||{};for(var i=0,n=this.models.length;i<n;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,x.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(i,t){return i&&Object.keys(i).length?this[t?"find":"filter"](function(t){for(var e in i)if(i[e]!==t.get(e))return!1;return!0}):t?void 0:[]},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(this.comparator)return t=t||{},"string"==typeof this.comparator||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(this.comparator.bind(this)),t.silent||this.trigger("sort",this,t),this;throw new Error("Cannot sort a set without a comparator")},pluck:function(e){return this.models.map(function(t){return t.get(e)})},fetch:function(i){void 0===(i=i?x.extend({},i):{}).parse&&(i.parse=!0);var n=i.success,r=this;return i.success=function(t){var e=i.reset?"reset":"set";r[e](t,i),n&&n(r,t,i),r.trigger("sync",r,t,i)},u(this,i),this.sync("read",this,i)},create:function(t,i){if(i=i?x.extend({},i):{},!(t=this._prepareModel(t,i)))return!1;i.wait||this.add(t,i);var n=this,r=i.success;return i.success=function(t,e){i.wait&&n.add(t,i),r&&r(t,e,i)},t.save(null,i),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId=Object.create(null)},_prepareModel:function(t,e){if(t instanceof E)return t;t=new((e=x.extend({},e)).collection=this).model(t,e);return t.validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_addReference:function(t,e){null!=(this._byId[t.cid]=t).id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}}),v("each")?(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"].filter(v).forEach(function(e){m.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),x[e].apply(x,t)}}),["groupBy","countBy","sortBy"].filter(v).forEach(function(i){m.prototype[i]=function(e,t){return x[i](this.models,"function"==typeof e?e:function(t){return t.get(e)},t)}})):(["forEach","map","filter","some","every","reduce","reduceRight","indexOf","lastIndexOf"].forEach(function(i){m.prototype[i]=function(t,e){return this.models[i](t,e)}}),m.prototype.find=function(n,r){var s;return this.some(function(t,e,i){if(n.call(r,t,e,i))return s=t,!0}),s},["sortBy"].forEach(function(i){m.prototype[i]=function(e,t){return x[i](this.models,"function"==typeof e?e:function(t){return t.get(e)},t)}})),Backbone.View=function(e){this.cid=x.uniqueId("view"),e&&Object.keys(e).forEach(function(t){-1!==j.indexOf(t)&&(this[t]=e[t])},this),this._ensureElement(),this.initialize.apply(this,arguments)}),_=/^(\S+)\s*(.*)$/,j=["model","collection","el","id","attributes","className","tagName","events"],k=(x.extend(i.prototype,c,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof Backbone.$?t:Backbone.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(!(t=t||x.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var i=t[e],e=("function"!=typeof i&&(i=this[t[e]]),e.match(_));this.delegate(e[1],e[2],i.bind(this))}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){var t;this.el?this.setElement(x.result(this,"el")):(t=x.extend({},x.result(this,"attributes")),this.id&&(t.id=x.result(this,"id")),this.className&&(t.class=x.result(this,"className")),this.setElement(this._createElement(x.result(this,"tagName"))),this._setAttributes(t))},_setAttributes:function(t){this.$el.attr(t)}}),Backbone.sync=function(e,i,n){var r={type:k[e],dataType:"json"},e=((n=n||{}).url||(r.url=x.result(i,"url")||t()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),"GET"!==r.type&&(r.processData=!1),n.xhr=Backbone.ajax(x.extend(r,n)));return i.trigger("request",i,e,n),e},{create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"}),s=(Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)},Backbone.Router=function(t){(t=t||{}).routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)}),O=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,A=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g,R=(x.extend(s.prototype,c,{initialize:function(){},route:function(e,i,n){(t=e)&&"object"==typeof t&&"[object RegExp]"===l.call(t)||(e=this._routeToRegExp(e)),"function"==typeof i&&(n=i,i=""),n=n||this[i];var t,r=this;return Backbone.history.route(e,function(t){t=r._extractParameters(e,t);r.execute(n,t),r.trigger.apply(r,["route:"+i].concat(t)),r.trigger("route",i,t),Backbone.history.trigger("route",r,i,t)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return Backbone.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=x.result(this,"routes");for(var t,e=Object.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(I,"\\$&").replace(O,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return i.map(function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}}),Backbone.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)}),S=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,T=/\/$/,C=/[#].*$/;return R.started=!1,x.extend(R.prototype,c,{atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){t=(t||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(t,e){var i;return null==t&&(this._wantsPushState||!this._wantsHashChange?(t=decodeURI(this.location.pathname+this.location.search),i=this.root.replace(T,""),t.indexOf(i)||(t=t.slice(i.length))):t=this.getHash()),t.replace(S,"")},start:function(t){if(R.started)throw new Error("Backbone.history has already been started");R.started=!0,this.options=x.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState;t=this.getFragment(),this.root=("/"+this.root+"/").replace(N,"/"),this._wantsPushState?window.addEventListener("popstate",this.checkUrl,!1):this._wantsHashChange&&window.addEventListener("hashchange",this.checkUrl,!1),this.fragment=t,t=this.location;if(this._wantsHashChange&&this._wantsPushState&&this.atRoot()&&t.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment)),!this.options.silent)return this.loadUrl()},stop:function(){window.removeEventListener("popstate",this.checkUrl),window.removeEventListener("hashchange",this.checkUrl),R.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){if(this.getFragment()===this.fragment)return!1;this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),this.handlers.some(function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(t,e){if(!R.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(C,""),this.fragment!==t){if(""===(this.fragment=t)&&"/"!==i&&(i=i.slice(0,-1)),this._wantsPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace)}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){i?(i=t.href.replace(/(javascript:|#).*$/,""),t.replace(i+"#"+e)):t.hash="#"+e}}),["Model","Collection","Router","View","History"].forEach(function(t){t=Backbone[t];t&&(t.extend=Backbone.extend)}),x.extend(Backbone,c),Backbone.history=new R,Backbone});
//# sourceMappingURL=exoskeleton.js.map